http:
  routers:
    anonymizer:
      rule: "PathPrefix(`/anonymizer`)"
      service: anonymizer-service
      entryPoints:
        - web
      middlewares:
        - strip-anonymizer
    
    identity:
      rule: "PathPrefix(`/identity`)"
      service: identity-service
      entryPoints:
        - web
      middlewares:
        - strip-identity
    
    report:
      rule: "PathPrefix(`/reports`)"
      service: report-service
      entryPoints:
        - web
      middlewares:
        - strip-reports
  
  middlewares:
    strip-anonymizer:
      stripPrefix:
        prefixes:
          - "/anonymizer"
    strip-identity:
      stripPrefix:
        prefixes:
          - "/identity"
    strip-reports:
      stripPrefix:
        prefixes:
          - "/reports"
  
  services:
    anonymizer-service:
      loadBalancer:
        servers:
          - url: "http://anonymizer-service:3002"
    
    identity-service:
      loadBalancer:
        servers:
          - url: "http://identity-service:3001"
    
    report-service:
      loadBalancer:
        servers:
          - url: "http://report-service:4000"